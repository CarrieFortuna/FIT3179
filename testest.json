{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "height": 500,
  "width": 750,
  "title": "Revenue Generated By Australian Developers (2020-2024)",
  "params":[
    {
      "name": "Year_select",
      "value": 2019,
      "bind": {
        "input": "range",
        "min": 2019,
        "max": 2023,
        "step": 1,
        "name": "Base Year: "
      }
    }
  ],
  "data": {
    "url": "revenue.csv"
  },
  "transform": [
    {"filter":"datum.Year>= Year_select"},
    {"window": [{"op":"first_value","field": "Revenue","as":"base"}],
    "sort": [{"field": "Year","order":"ascending"}]},
    {"calculate": "datum.Revenue/datum.base *100","as":"change"}
  ]
  ,
  "mark": "area",
  "encoding": {
    "x": {
      "field": "Year",
      "type": "nominal",
      "title":"Year"
    },
    "y": {
      "field": "change",
      "type": "quantitative",
      "title":"Percentage Change (%)"
    },
    "color":{"condition":{"test":"datum.Revenue >= datum.base","value":"blue"},"value":"red"},
    "tooltip":[
      {"field":"Year","type": "nominal"},
      {"field":"change","type":"quantitative", "title":"Percentage Change:","format":".1f"}]
    }
  }